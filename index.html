<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<style>
		body {
			margin: 0px;
			background-color: #0C001C;
			color: #fff;
			font-family: verdana;
			font-size: 12px;
		}

		h1 {
			display: inline;
			font-size: 12px;
			font-weight: bold;
			margin: 0px;
			margin-right: 20px;
			color: #C1CAFF;
		}

		#sms-canvas-container {
			width: 256px; 
			height: 192px;
			margin-top: calc((100vh - 192px - 8px) / 2);

			margin-left: auto;
			margin-right: auto;
			display: block;
			border: solid #333333 4px;
			border-radius: 8px;

			-webkit-box-shadow: 0px 0px 5px 5px rgba(0,0,0,0.75);
			-moz-box-shadow: 0px 0px 5px 5px rgba(0,0,0,0.75);
			box-shadow: 0px 0px 5px 5px rgba(0,0,0,0.75);
		}

		#sms-canvas {
			width: 100%;
			height: 100%;
			background-color: #000;
		}

		@media (min-width: 522px) and (min-height: 434px) {
			#sms-canvas-container {
				width: 512px; height: 384px;
				margin-top: calc((100vh - 384px - 8px) / 2);
			}
		}

		@media (min-width: 778px) and (min-height: 626px) {
			#sms-canvas-container {
				width: 768px; height: 576px;
				margin-top: calc((100vh - 576px - 8px) / 2);
			}
		}

		@media (min-width: 1034px) and (min-height: 818px) {
			#sms-canvas-container {
				width: 1024px; height: 768px;
				margin-top: calc((100vh - 768px - 8px) / 2);
			}
		}

		@media (min-width: 1380px) and (min-height: 1100px) {
			#sms-canvas-container {
				width: 1280px; height: 960px;
				margin-top: calc((100vh - 960px - 8px) / 2);
			}
		}

		button {
			background-color: #333333;
			color: #fff;
			border: none;
			border-radius: 6px;
			padding: 4px 8px;
		}

		#tool-bar {
			width: 100%;
			height: 31px;
			position: fixed;
			top: 0px;
			left: 0px;
			background-color: #000;
			box-sizing: border-box;
			padding: 4px;
		}

		#mem-dump {
			color: #fff;
		}

		.onscreen-gamepad {
			position: absolute;
			width: 100%;
			box-sizing: border-box;
			bottom: 10px;
			height: 180px;

			-webkit-touch-callout: none;
			-webkit-user-select: none;
			-khtml-user-select: none;
			-moz-user-select: none;
			-ms-user-select: none;
			user-select: none;
		}

		.onscreen-gamepad-dpad {
			width: 180px;
			height: 180px;
			box-sizing: border-box;
			background-color: rgba(255, 255, 255, 0.5);
			position: absolute;
			top: 0px;
			left: 10px;
			border-radius: 20px;
		}

		.onscreen-gamepad-dpad-button {
			box-sizing: border-box;
			background-color: pink;
			width: 33%;
			height: 33%;
			position: absolute;
			background-color: rgba(255, 255, 255, 0.5);
		}

		.onscreen-gamepad-dpad-button-left {
			left: 0;
			top: calc(50% - (33% / 2));
			border-radius: 0px 20px 20px 0px;
		}

		.onscreen-gamepad-dpad-button-right {
			right: 0;
			top: calc(50% - (33% / 2));
			border-radius: 20px 0px 0px 20px;
		}

		.onscreen-gamepad-dpad-button-up {
			left: calc(50% - (33% / 2));
			top: 0;
			border-radius: 0px 0px 20px 20px;
		}

		.onscreen-gamepad-dpad-button-down {
			left: calc(50% - (33% / 2));
			bottom: 0;
			border-radius: 20px 20px 0px 0px;
		}

		.onscreen-gamepad-triggers {
			position: absolute;
			width: 180px;
			top: calc(50% - (80px / 2));
			right: 10px;
			height: 80px;
		}

		.onscreen-gamepad-trigger-button {
			width: 80px;
			height: 80px;
			position: absolute;
			border-radius: 40px;
			padding-top: 21px;
			box-sizing: border-box;
			text-align: center;
			background-color: rgba(255, 255, 255, 0.5);
			font-size: 30px;
			color: rgba(255, 255, 255, 0.2);
		}

		.onscreen-gamepad-trigger-button-a {
			left: 0px;
			top: 0px;
		}

		.onscreen-gamepad-trigger-button-b {
			right: 0px;
			top: 0px;
		}

		@media (orientation: landscape) {
			.onscreen-gamepad {
				top: calc(50% - (150px / 2));
				bottom: auto;
			}
		}
	</style>
</head>
<body>

	<div id="tool-bar">
		<h1>Andy's Sega Master System Emulator</h1>

		<label for="romFileInput">Load ROM (.sms)</label>
		<input type="file" id="romFileInput" onchange="sms.loadRom()" />
		<button onclick="sms.enterFullscreen()">Full Screen</button>
		<button onclick="sms.mmc.dump()">Dump RAM</button>
		<!--<button onclick="sms.mmc.stash()">Stash RAM</button>
		<button onclick="sms.mmc.diffStash()">Diff RAM</button>-->
		<!--<button onclick="sms.loadRom()">Load ROM</button>-->
		Frame duration: <span id="frameDuration">-</span>
	</div>

	<div id="sms-canvas-container">
		<canvas id="sms-canvas" style="image-rendering: pixelated; image-rendering: -moz-crisp-edges;" width="256" height="192"></canvas>
	</div>

	<div data-role="onscreen-gamepad" class="onscreen-gamepad">
		<div class="onscreen-gamepad-dpad">
			<div data-role="onscreen-gamepad-button" data-button-index="2" class="onscreen-gamepad-dpad-button onscreen-gamepad-dpad-button-left"></div>
			<div data-role="onscreen-gamepad-button" data-button-index="3" class="onscreen-gamepad-dpad-button onscreen-gamepad-dpad-button-right"></div>
			<div data-role="onscreen-gamepad-button" data-button-index="0" class="onscreen-gamepad-dpad-button onscreen-gamepad-dpad-button-up"></div>
			<div data-role="onscreen-gamepad-button" data-button-index="1" class="onscreen-gamepad-dpad-button onscreen-gamepad-dpad-button-down"></div>
		</div>
		<div class="onscreen-gamepad-triggers">
			<div data-role="onscreen-gamepad-button" data-button-index="4" class="onscreen-gamepad-trigger-button onscreen-gamepad-trigger-button-a">A</div>
			<div data-role="onscreen-gamepad-button" data-button-index="5" class="onscreen-gamepad-trigger-button onscreen-gamepad-trigger-button-b">B</div>
		</div>
	</div>

	<pre id="mem-dump"></pre>

	<script src="js/sms.js?noCache=9"></script>
	<script src="js/cpu.js?noCache=9"></script>
	<script src="js/mmc.js?noCache=9"></script>
	<script src="js/ioc.js?noCache=9"></script>
	<script src="js/vdp.js?noCache=9"></script>
	<script src="js/input.js?noCache=9"></script>
	<script src="js/audio.js?noCache=9"></script>
	<script src="js/util.js?noCache=9"></script>
	<script src="js/const.js?noCache=9"></script>
	<script src="js/start.js?noCache=9"></script>
</body>
</html>